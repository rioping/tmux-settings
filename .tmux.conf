# --- 基本設定 ---
set -g default-terminal "screen-256color"
set -g history-limit 50000
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on
set -g mouse on
set -g escape-time 0

# --- ステータスバー更新間隔 ---
set -g status-interval 3

# --- ステータスバー外観 ---
set -g status-position top
set -g status-justify centre
set -g status-style 'bg=#1e1e2e,fg=#cdd6f4'
set -g status-left-length 40
set -g status-right-length 200

# 左: セッション名
set -g status-left '#[fg=#1e1e2e,bg=#89b4fa,bold] #S #[default] '

# 右: 全セッションサマリー
set -g status-right '#(bash ~/.claude/scripts/tmux-window-status.sh) '

# --- ウィンドウタブ ---
set -g window-status-format ' #I:#W '
set -g window-status-current-format '#[fg=#1e1e2e,bg=#a6e3a1,bold] #I:#W #[default]'
set -g window-status-style 'fg=#6c7086'

# --- monitor-activity / silence ---
set -g monitor-activity on
set -g monitor-silence 30
set -g visual-activity off
set -g visual-silence off
set -g window-status-activity-style 'fg=#fab387'

# --- ペインボーダーにステータス表示 ---
set -g pane-border-status top
set -g pane-border-format ' #{pane_index} | #(bash ~/.claude/scripts/tmux-pane-status.sh #{pane_id}) | #{pane_current_path} '
set -g pane-border-style 'fg=#585b70'
set -g pane-active-border-style 'fg=#585b70'  # 状態色は state-update.sh / window-status.sh がペイン単位で上書き

# ペインボーダー色は state-update.sh で即時更新 + tmux-window-status.sh で3秒ごとにフォールバック更新

# --- キーバインド ---
bind | split-window -h -c '#{pane_current_path}'
bind - split-window -v -c '#{pane_current_path}'
bind -n M-Left  select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up    select-pane -U
bind -n M-Down  select-pane -D
bind r source-file ~/.tmux.conf \; display-message "Config reloaded"
